{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "vulnerabilityAssessments_Default_storageContainerPath": {
      "type": "SecureString"
    },
    "sites_necsus_api_name": {
      "defaultValue": "necsus-api",
      "type": "String"
    },
    "sites_necsus_web_name": {
      "defaultValue": "necsus-web",
      "type": "String"
    },
    "servers_necsus_sqlserver_name": {
      "defaultValue": "necsus-sqlserver",
      "type": "String"
    },
    "serverfarms_necsus_api_asp_name": {
      "defaultValue": "necsus-api-asp",
      "type": "String"
    },
    "serverfarms_necsus_web_asp_name": {
      "defaultValue": "necsus-web-asp",
      "type": "String"
    },
    "vaults_necsus_keyvault_name": {
      "defaultValue": "necsus-keyvault",
      "type": "String"
    },
    "storageAccounts_necsusblobint_name": {
      "defaultValue": "necsusblobint",
      "type": "String"
    },
    "virtualNetworks_necsus_vnet_name": {
      "defaultValue": "necsus-vnet",
      "type": "String"
    },
    "privateEndpoints_necsus_private_endpoint_name": {
      "defaultValue": "necsus-private-endpoint",
      "type": "String"
    },
    "privateDnsZones_privatelink_database_windows_net_name": {
      "defaultValue": "privatelink.database.windows.net",
      "type": "String"
    },
    "networkInterfaces_necsus_private_endpoint_nic_name": {
      "defaultValue": "necsus-private-endpoint-nic",
      "type": "String"
    },
    "default_sql_admin": {
      "defaultValue": "adm1n",
      "type": "String"
    },
    "default_sql_password": {
      "defaultValue": "[concat('P', uniqueString(resourceGroup().id, deployment().name, '224F5A8B-51DB-46A3-A7C8-59B0DD584A41'), 'x', '!')]",
      "type": "String"
    }
  },
  "variables": {},
  "resources": [
    {
      "type": "Microsoft.KeyVault/vaults",
      "apiVersion": "2021-11-01-preview",
      "name": "[parameters('vaults_necsus_keyvault_name')]",
      "location": "eastus",
      "properties": {
        "sku": {
          "family": "A",
          "name": "Standard"
        },
        "tenantId": "8da3f43c-16aa-44d8-a53c-82a4700f0691",
        "accessPolicies": [
          {
            "tenantId": "8da3f43c-16aa-44d8-a53c-82a4700f0691",
            "objectId": "26c8a1d4-a874-4c58-b888-bf2b3ecb9eba",
            "permissions": {
              "keys": [],
              "secrets": [
                "Get",
                "List"
              ],
              "certificates": []
            }
          },
          {
            "tenantId": "8da3f43c-16aa-44d8-a53c-82a4700f0691",
            "objectId": "efb083fe-82ad-4409-bcc5-7ef7577e6cd0",
            "permissions": {
              "keys": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "GetRotationPolicy",
                "SetRotationPolicy",
                "Rotate"
              ],
              "secrets": [
                "Get",
                "List",
                "Set",
                "Delete",
                "Recover",
                "Backup",
                "Restore"
              ],
              "certificates": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "ManageContacts",
                "ManageIssuers",
                "GetIssuers",
                "ListIssuers",
                "SetIssuers",
                "DeleteIssuers"
              ]
            }
          },
          {
            "tenantId": "8da3f43c-16aa-44d8-a53c-82a4700f0691",
            "objectId": "67b0a19e-2867-4ec9-bd4d-7af32fde8cef",
            "permissions": {
              "keys": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "GetRotationPolicy",
                "SetRotationPolicy",
                "Rotate"
              ],
              "secrets": [
                "Get",
                "List",
                "Set",
                "Delete",
                "Recover",
                "Backup",
                "Restore"
              ],
              "certificates": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "ManageContacts",
                "ManageIssuers",
                "GetIssuers",
                "ListIssuers",
                "SetIssuers",
                "DeleteIssuers"
              ]
            }
          },
          {
            "tenantId": "8da3f43c-16aa-44d8-a53c-82a4700f0691",
            "objectId": "157d1871-bea9-43f1-9c9c-6337541aaaf1",
            "permissions": {
              "keys": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "Decrypt",
                "Encrypt",
                "UnwrapKey",
                "WrapKey",
                "Verify",
                "Sign",
                "Purge",
                "Release",
                "Rotate",
                "GetRotationPolicy",
                "SetRotationPolicy"
              ],
              "secrets": [
                "Get",
                "List",
                "Set",
                "Delete",
                "Recover",
                "Backup",
                "Restore"
              ],
              "certificates": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "ManageContacts",
                "ManageIssuers",
                "GetIssuers",
                "ListIssuers",
                "SetIssuers",
                "DeleteIssuers"
              ]
            }
          },
          {
            "tenantId": "8da3f43c-16aa-44d8-a53c-82a4700f0691",
            "objectId": "b7fa63a3-1584-43d8-8512-744c8d0b8783",
            "permissions": {
              "keys": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "GetRotationPolicy",
                "SetRotationPolicy",
                "Rotate"
              ],
              "secrets": [
                "Get",
                "List",
                "Set",
                "Delete",
                "Recover",
                "Backup",
                "Restore"
              ],
              "certificates": [
                "Get",
                "List",
                "Update",
                "Create",
                "Import",
                "Delete",
                "Recover",
                "Backup",
                "Restore",
                "ManageContacts",
                "ManageIssuers",
                "GetIssuers",
                "ListIssuers",
                "SetIssuers",
                "DeleteIssuers"
              ]
            }
          }
        ],
        "enabledForDeployment": false,
        "enabledForDiskEncryption": false,
        "enabledForTemplateDeployment": false,
        "enableSoftDelete": true,
        "softDeleteRetentionInDays": 90,
        "enableRbacAuthorization": false,
        "vaultUri": "[concat('https://', parameters('vaults_necsus_keyvault_name'), '.vault.azure.net/')]",
        "provisioningState": "Succeeded",
        "publicNetworkAccess": "Enabled"
      }
    },
    {
      "type": "Microsoft.Network/privateDnsZones",
      "apiVersion": "2018-09-01",
      "name": "[parameters('privateDnsZones_privatelink_database_windows_net_name')]",
      "location": "global",
      "properties": {
        "maxNumberOfRecordSets": 25000,
        "maxNumberOfVirtualNetworkLinks": 1000,
        "maxNumberOfVirtualNetworkLinksWithRegistration": 100,
        "numberOfRecordSets": 2,
        "numberOfVirtualNetworkLinks": 1,
        "numberOfVirtualNetworkLinksWithRegistration": 0,
        "provisioningState": "Succeeded"
      }
    },
    {
      "type": "Microsoft.Network/virtualNetworks",
      "apiVersion": "2020-11-01",
      "name": "[parameters('virtualNetworks_necsus_vnet_name')]",
      "location": "eastus",
      "properties": {
        "addressSpace": {
          "addressPrefixes": [
            "10.1.0.0/16"
          ]
        },
        "subnets": [
          {
            "name": "PrivateLinkSubnet",
            "properties": {
              "addressPrefix": "10.1.1.0/24",
              "serviceEndpoints": [],
              "delegations": [],
              "privateEndpointNetworkPolicies": "Disabled",
              "privateLinkServiceNetworkPolicies": "Enabled"
            }
          },
          {
            "name": "AppSvcSubnet",
            "properties": {
              "addressPrefix": "10.1.2.0/24",
              "serviceEndpoints": [],
              "delegations": [
                {
                  "name": "delegation",
                  "properties": {
                    "serviceName": "Microsoft.Web/serverfarms"
                  }
                }
              ],
              "privateEndpointNetworkPolicies": "Disabled",
              "privateLinkServiceNetworkPolicies": "Enabled"
            }
          }
        ],
        "virtualNetworkPeerings": [],
        "enableDdosProtection": false
      }
    },
    {
      "type": "Microsoft.Sql/servers",
      "apiVersion": "2021-11-01-preview",
      "name": "[parameters('servers_necsus_sqlserver_name')]",
      "location": "eastus",
      "kind": "v12.0",
      "properties": {
        "administratorLogin": "[parameters('default_sql_admin')]",
        "administratorLoginPassword": "[parameters('default_sql_password')]",
        "version": "12.0",
        "restrictOutboundNetworkAccess": "Disabled"
      }
    },
    {
      "type": "Microsoft.Storage/storageAccounts",
      "apiVersion": "2021-09-01",
      "name": "[parameters('storageAccounts_necsusblobint_name')]",
      "location": "eastus",
      "sku": {
        "name": "Standard_LRS",
        "tier": "Standard"
      },
      "kind": "StorageV2",
      "properties": {
        "dnsEndpointType": "Standard",
        "defaultToOAuthAuthentication": false,
        "publicNetworkAccess": "Enabled",
        "allowCrossTenantReplication": true,
        "minimumTlsVersion": "TLS1_2",
        "allowBlobPublicAccess": true,
        "allowSharedKeyAccess": true,
        "networkAcls": {
          "bypass": "AzureServices",
          "virtualNetworkRules": [],
          "ipRules": [],
          "defaultAction": "Allow"
        },
        "supportsHttpsTrafficOnly": true,
        "encryption": {
          "requireInfrastructureEncryption": false,
          "services": {
            "file": {
              "keyType": "Account",
              "enabled": true
            },
            "blob": {
              "keyType": "Account",
              "enabled": true
            }
          },
          "keySource": "Microsoft.Storage"
        },
        "accessTier": "Hot"
      }
    },
    {
      "type": "Microsoft.Web/serverfarms",
      "apiVersion": "2022-03-01",
      "name": "[parameters('serverfarms_necsus_api_asp_name')]",
      "location": "East US",
      "sku": {
        "name": "B1",
        "tier": "Basic",
        "size": "B1",
        "family": "B",
        "capacity": 1
      },
      "kind": "app",
      "properties": {
        "perSiteScaling": false,
        "elasticScaleEnabled": false,
        "maximumElasticWorkerCount": 1,
        "isSpot": false,
        "reserved": false,
        "isXenon": false,
        "hyperV": false,
        "targetWorkerCount": 0,
        "targetWorkerSizeId": 0,
        "zoneRedundant": false
      }
    },
    {
      "type": "Microsoft.Web/serverfarms",
      "apiVersion": "2022-03-01",
      "name": "[parameters('serverfarms_necsus_web_asp_name')]",
      "location": "East US",
      "sku": {
        "name": "F1",
        "tier": "Free",
        "size": "F1",
        "family": "F",
        "capacity": 0
      },
      "kind": "app",
      "properties": {
        "perSiteScaling": false,
        "elasticScaleEnabled": false,
        "maximumElasticWorkerCount": 0,
        "isSpot": false,
        "reserved": false,
        "isXenon": false,
        "hyperV": false,
        "targetWorkerCount": 0,
        "targetWorkerSizeId": 0,
        "zoneRedundant": false
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('vaults_necsus_keyvault_name'), '/necsus-appreg-secret')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_necsus_keyvault_name'))]"
      ],
      "properties": {
        "attributes": {
          "enabled": true
        }
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('vaults_necsus_keyvault_name'), '/necsus-blob-connectionstring')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_necsus_keyvault_name'))]"
      ],
      "properties": {
        "attributes": {
          "enabled": true
        }
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('vaults_necsus_keyvault_name'), '/necsus-blob-conn')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_necsus_keyvault_name'))]"
      ],
      "properties": {
        "attributes": {
          "enabled": false
        }
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('vaults_necsus_keyvault_name'), '/necsus-blob-key')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_necsus_keyvault_name'))]"
      ],
      "properties": {
        "attributes": {
          "enabled": false
        }
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('vaults_necsus_keyvault_name'), '/necsus-sql-conn')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_necsus_keyvault_name'))]"
      ],
      "properties": {
        "attributes": {
          "enabled": false
        }
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('vaults_necsus_keyvault_name'), '/necsus-sql-connection-string')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_necsus_keyvault_name'))]"
      ],
      "properties": {
        "attributes": {
          "enabled": true
        }
      }
    },
    {
      "type": "Microsoft.Network/networkInterfaces",
      "apiVersion": "2020-11-01",
      "name": "[parameters('networkInterfaces_necsus_private_endpoint_nic_name')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'PrivateLinkSubnet')]"
      ],
      "properties": {
        "ipConfigurations": [
          {
            "name": "privateEndpointIpConfig.1925a82d-39b7-4164-96d7-f6e3508f21fe",
            "properties": {
              "privateIPAddress": "10.1.1.4",
              "privateIPAllocationMethod": "Dynamic",
              "subnet": {
                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'PrivateLinkSubnet')]"
              },
              "primary": true,
              "privateIPAddressVersion": "IPv4"
            }
          }
        ],
        "dnsSettings": {
          "dnsServers": []
        },
        "enableAcceleratedNetworking": false,
        "enableIPForwarding": false
      }
    },
    {
      "type": "Microsoft.Network/privateDnsZones/A",
      "apiVersion": "2018-09-01",
      "name": "[concat(parameters('privateDnsZones_privatelink_database_windows_net_name'), '/necsus-sqlserver')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_privatelink_database_windows_net_name'))]"
      ],
      "properties": {
        "metadata": {
          "creator": "created by private endpoint necsus-private-endpoint with resource guid d3f7bd7a-8445-496e-8d2e-73f85035a131"
        },
        "ttl": 10,
        "aRecords": [
          {
            "ipv4Address": "10.1.1.4"
          }
        ]
      }
    },
    {
      "type": "Microsoft.Network/privateDnsZones/SOA",
      "apiVersion": "2018-09-01",
      "name": "[concat(parameters('privateDnsZones_privatelink_database_windows_net_name'), '/@')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_privatelink_database_windows_net_name'))]"
      ],
      "properties": {
        "ttl": 3600,
        "soaRecord": {
          "email": "azureprivatedns-host.microsoft.com",
          "expireTime": 2419200,
          "host": "azureprivatedns.net",
          "minimumTtl": 10,
          "refreshTime": 3600,
          "retryTime": 300,
          "serialNumber": 1
        }
      }
    },
    {
      "type": "Microsoft.Network/virtualNetworks/subnets",
      "apiVersion": "2020-11-01",
      "name": "[concat(parameters('virtualNetworks_necsus_vnet_name'), '/AppSvcSubnet')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_necsus_vnet_name'))]"
      ],
      "properties": {
        "addressPrefix": "10.1.2.0/24",
        "serviceEndpoints": [],
        "delegations": [
          {
            "name": "delegation",
            "properties": {
              "serviceName": "Microsoft.Web/serverfarms"
            }
          }
        ],
        "privateEndpointNetworkPolicies": "Disabled",
        "privateLinkServiceNetworkPolicies": "Enabled"
      }
    },
    {
      "type": "Microsoft.Network/virtualNetworks/subnets",
      "apiVersion": "2020-11-01",
      "name": "[concat(parameters('virtualNetworks_necsus_vnet_name'), '/PrivateLinkSubnet')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_necsus_vnet_name'))]"
      ],
      "properties": {
        "addressPrefix": "10.1.1.0/24",
        "serviceEndpoints": [],
        "delegations": [],
        "privateEndpointNetworkPolicies": "Disabled",
        "privateLinkServiceNetworkPolicies": "Enabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/advancedThreatProtectionSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/CreateIndex')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/DbParameterization')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/DefragmentIndex')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/DropIndex')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/ForceLastGoodPlan')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Enabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/auditingPolicies",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/Default')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "auditingState": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/auditingSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "retentionDays": 0,
        "auditActionsAndGroups": [],
        "isStorageSecondaryKeyInUse": false,
        "isAzureMonitorTargetEnabled": false,
        "isManagedIdentityInUse": false,
        "state": "Disabled",
        "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
      }
    },
    {
      "type": "Microsoft.Sql/servers/connectionPolicies",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/default')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "connectionType": "Default"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "sku": {
        "name": "Standard",
        "tier": "Standard",
        "capacity": 10
      },
      "kind": "v12.0,user",
      "properties": {
        "collation": "SQL_Latin1_General_CP1_CI_AS",
        "maxSizeBytes": 268435456000,
        "catalogCollation": "SQL_Latin1_General_CP1_CI_AS",
        "zoneRedundant": false,
        "readScale": "Disabled",
        "requestedBackupStorageRedundancy": "Geo",
        "maintenanceConfigurationId": "/subscriptions/e4a64f2c-22d9-4ff3-b490-f43b7c1a0cc1/providers/Microsoft.Maintenance/publicMaintenanceConfigurations/SQL_Default",
        "isLedgerOn": false
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/advancedThreatProtectionSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/auditingPolicies",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Default')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "auditingState": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/auditingSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "retentionDays": 0,
        "isAzureMonitorTargetEnabled": false,
        "state": "Disabled",
        "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/extendedAuditingSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "retentionDays": 0,
        "isAzureMonitorTargetEnabled": false,
        "state": "Disabled",
        "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/geoBackupPolicies",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Default')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/ledgerDigestUploads",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Current')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {}
    },
    {
      "type": "Microsoft.Sql/servers/databases/securityAlertPolicies",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled",
        "disabledAlerts": [
          ""
        ],
        "emailAddresses": [
          ""
        ],
        "emailAccountAdmins": false,
        "retentionDays": 0
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/transparentDataEncryption",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Current')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/master/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "recurringScans": {
          "isEnabled": false,
          "emailSubscriptionAdmins": true
        }
      }
    },
    {
      "type": "Microsoft.Sql/servers/devOpsAuditingSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "isAzureMonitorTargetEnabled": false,
        "state": "Disabled",
        "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
      }
    },
    {
      "type": "Microsoft.Sql/servers/encryptionProtector",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/current')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "kind": "servicemanaged",
      "properties": {
        "serverKeyName": "ServiceManaged",
        "serverKeyType": "ServiceManaged",
        "autoRotationEnabled": false
      }
    },
    {
      "type": "Microsoft.Sql/servers/extendedAuditingSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "retentionDays": 0,
        "auditActionsAndGroups": [],
        "isStorageSecondaryKeyInUse": false,
        "isAzureMonitorTargetEnabled": false,
        "isManagedIdentityInUse": false,
        "state": "Disabled",
        "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
      }
    },
    {
      "type": "Microsoft.Sql/servers/keys",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/ServiceManaged')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "kind": "servicemanaged",
      "properties": {
        "serverKeyType": "ServiceManaged"
      }
    },
    {
      "type": "Microsoft.Sql/servers/securityAlertPolicies",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled",
        "disabledAlerts": [
          ""
        ],
        "emailAddresses": [
          ""
        ],
        "emailAccountAdmins": false,
        "retentionDays": 0
      }
    },
    {
      "type": "Microsoft.Sql/servers/vulnerabilityAssessments",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "recurringScans": {
          "isEnabled": false,
          "emailSubscriptionAdmins": true
        },
        "storageContainerPath": "[parameters('vulnerabilityAssessments_Default_storageContainerPath')]"
      }
    },
    {
      "type": "Microsoft.Storage/storageAccounts/blobServices",
      "apiVersion": "2021-09-01",
      "name": "[concat(parameters('storageAccounts_necsusblobint_name'), '/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_necsusblobint_name'))]"
      ],
      "sku": {
        "name": "Standard_LRS",
        "tier": "Standard"
      },
      "properties": {
        "changeFeed": {
          "enabled": false
        },
        "restorePolicy": {
          "enabled": false
        },
        "containerDeleteRetentionPolicy": {
          "enabled": true,
          "days": 7
        },
        "cors": {
          "corsRules": []
        },
        "deleteRetentionPolicy": {
          "allowPermanentDelete": false,
          "enabled": true,
          "days": 7
        },
        "isVersioningEnabled": false
      }
    },
    {
      "type": "Microsoft.Storage/storageAccounts/fileServices",
      "apiVersion": "2021-09-01",
      "name": "[concat(parameters('storageAccounts_necsusblobint_name'), '/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_necsusblobint_name'))]"
      ],
      "sku": {
        "name": "Standard_LRS",
        "tier": "Standard"
      },
      "properties": {
        "protocolSettings": {
          "smb": {}
        },
        "cors": {
          "corsRules": []
        },
        "shareDeleteRetentionPolicy": {
          "enabled": true,
          "days": 7
        }
      }
    },
    {
      "type": "Microsoft.Storage/storageAccounts/queueServices",
      "apiVersion": "2021-09-01",
      "name": "[concat(parameters('storageAccounts_necsusblobint_name'), '/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_necsusblobint_name'))]"
      ],
      "properties": {
        "cors": {
          "corsRules": []
        }
      }
    },
    {
      "type": "Microsoft.Storage/storageAccounts/tableServices",
      "apiVersion": "2021-09-01",
      "name": "[concat(parameters('storageAccounts_necsusblobint_name'), '/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_necsusblobint_name'))]"
      ],
      "properties": {
        "cors": {
          "corsRules": []
        }
      }
    },
    {
      "type": "Microsoft.Web/sites",
      "apiVersion": "2022-03-01",
      "name": "[parameters('sites_necsus_web_name')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/serverfarms', parameters('serverfarms_necsus_web_asp_name'))]"
      ],
      "kind": "app",
      "properties": {
        "enabled": true,
        "hostNameSslStates": [
          {
            "name": "[concat(parameters('sites_necsus_web_name'), '.azurewebsites.net')]",
            "sslState": "Disabled",
            "hostType": "Standard"
          },
          {
            "name": "[concat(parameters('sites_necsus_web_name'), '.scm.azurewebsites.net')]",
            "sslState": "Disabled",
            "hostType": "Repository"
          }
        ],
        "serverFarmId": "[resourceId('Microsoft.Web/serverfarms', parameters('serverfarms_necsus_web_asp_name'))]",
        "reserved": false,
        "isXenon": false,
        "hyperV": false,
        "vnetRouteAllEnabled": false,
        "siteConfig": {
          "numberOfWorkers": 1,
          "acrUseManagedIdentityCreds": false,
          "alwaysOn": false,
          "http20Enabled": false,
          "functionAppScaleLimit": 0,
          "minimumElasticInstanceCount": 0
        },
        "scmSiteAlsoStopped": false,
        "clientAffinityEnabled": true,
        "clientCertEnabled": false,
        "clientCertMode": "Required",
        "hostNamesDisabled": false,
        "customDomainVerificationId": "F80E45E9C481A25CC85D4144860C091E8C84D11474A31680603AA30ACC89BFA0",
        "containerSize": 0,
        "dailyMemoryTimeQuota": 0,
        "httpsOnly": true,
        "redundancyMode": "None",
        "storageAccountRequired": false,
        "keyVaultReferenceIdentity": "SystemAssigned"
      }
    },
    {
      "type": "Microsoft.Web/sites/basicPublishingCredentialsPolicies",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/ftp')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ],
      "properties": {
        "allow": true
      }
    },
    {
      "type": "Microsoft.Web/sites/basicPublishingCredentialsPolicies",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/ftp')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "allow": true
      }
    },
    {
      "type": "Microsoft.Web/sites/basicPublishingCredentialsPolicies",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/scm')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ],
      "properties": {
        "allow": true
      }
    },
    {
      "type": "Microsoft.Web/sites/basicPublishingCredentialsPolicies",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/scm')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "allow": true
      }
    },
    {
      "type": "Microsoft.Web/sites/config",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/web')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ],
      "properties": {
        "numberOfWorkers": 1,
        "defaultDocuments": [
          "Default.htm",
          "Default.html",
          "Default.asp",
          "index.htm",
          "index.html",
          "iisstart.htm",
          "default.aspx",
          "index.php",
          "hostingstart.html"
        ],
        "netFrameworkVersion": "v6.0",
        "requestTracingEnabled": false,
        "remoteDebuggingEnabled": false,
        "remoteDebuggingVersion": "VS2019",
        "httpLoggingEnabled": false,
        "acrUseManagedIdentityCreds": false,
        "logsDirectorySizeLimit": 35,
        "detailedErrorLoggingEnabled": false,
        "publishingUsername": "$necsus-api",
        "scmType": "None",
        "use32BitWorkerProcess": true,
        "webSocketsEnabled": false,
        "alwaysOn": false,
        "managedPipelineMode": "Integrated",
        "virtualApplications": [
          {
            "virtualPath": "/",
            "physicalPath": "site\\wwwroot",
            "preloadEnabled": false
          }
        ],
        "loadBalancing": "LeastRequests",
        "experiments": {
          "rampUpRules": []
        },
        "autoHealEnabled": false,
        "vnetName": "606b9b94-8889-44f0-a104-9a06e06f1baf_AppSvcSubnet",
        "vnetRouteAllEnabled": true,
        "vnetPrivatePortsCount": 0,
        "cors": {
          "allowedOrigins": [
            "https://necsus-web.azurewebsites.net"
          ],
          "supportCredentials": true
        },
        "localMySqlEnabled": false,
        "managedServiceIdentityId": 30910,
        "ipSecurityRestrictions": [
          {
            "ipAddress": "Any",
            "action": "Allow",
            "priority": 1,
            "name": "Allow all",
            "description": "Allow all access"
          }
        ],
        "scmIpSecurityRestrictions": [
          {
            "ipAddress": "Any",
            "action": "Allow",
            "priority": 1,
            "name": "Allow all",
            "description": "Allow all access"
          }
        ],
        "scmIpSecurityRestrictionsUseMain": false,
        "http20Enabled": false,
        "minTlsVersion": "1.2",
        "scmMinTlsVersion": "1.2",
        "ftpsState": "FtpsOnly",
        "preWarmedInstanceCount": 0,
        "functionAppScaleLimit": 0,
        "functionsRuntimeScaleMonitoringEnabled": false,
        "minimumElasticInstanceCount": 0,
        "azureStorageAccounts": {}
      }
    },
    {
      "type": "Microsoft.Web/sites/config",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/web')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "numberOfWorkers": 1,
        "defaultDocuments": [
          "Default.htm",
          "Default.html",
          "Default.asp",
          "index.htm",
          "index.html",
          "iisstart.htm",
          "default.aspx",
          "index.php",
          "hostingstart.html"
        ],
        "netFrameworkVersion": "v6.0",
        "requestTracingEnabled": false,
        "remoteDebuggingEnabled": false,
        "httpLoggingEnabled": false,
        "acrUseManagedIdentityCreds": false,
        "logsDirectorySizeLimit": 35,
        "detailedErrorLoggingEnabled": false,
        "publishingUsername": "$necsus-web",
        "scmType": "None",
        "use32BitWorkerProcess": true,
        "webSocketsEnabled": false,
        "alwaysOn": false,
        "managedPipelineMode": "Integrated",
        "virtualApplications": [
          {
            "virtualPath": "/",
            "physicalPath": "site\\wwwroot",
            "preloadEnabled": false
          }
        ],
        "loadBalancing": "LeastRequests",
        "experiments": {
          "rampUpRules": []
        },
        "autoHealEnabled": false,
        "vnetRouteAllEnabled": false,
        "vnetPrivatePortsCount": 0,
        "localMySqlEnabled": false,
        "ipSecurityRestrictions": [
          {
            "ipAddress": "Any",
            "action": "Allow",
            "priority": 1,
            "name": "Allow all",
            "description": "Allow all access"
          }
        ],
        "scmIpSecurityRestrictions": [
          {
            "ipAddress": "Any",
            "action": "Allow",
            "priority": 1,
            "name": "Allow all",
            "description": "Allow all access"
          }
        ],
        "scmIpSecurityRestrictionsUseMain": false,
        "http20Enabled": false,
        "minTlsVersion": "1.2",
        "scmMinTlsVersion": "1.2",
        "ftpsState": "FtpsOnly",
        "preWarmedInstanceCount": 0,
        "functionAppScaleLimit": 0,
        "functionsRuntimeScaleMonitoringEnabled": false,
        "minimumElasticInstanceCount": 0,
        "azureStorageAccounts": {}
      }
    },
    {
      "type": "Microsoft.Web/sites/deployments",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/0ce7e03b8ff5475eb4076c523e7ebf5b')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "status": 4,
        "author_email": "N/A",
        "author": "VS Code",
        "deployer": "ZipDeploy",
        "message": "Created via a push deployment",
        "start_time": "2022-07-20T03:13:42.8147539Z",
        "end_time": "2022-07-20T03:13:48.2211074Z",
        "active": false
      }
    },
    {
      "type": "Microsoft.Web/sites/deployments",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/18bb80b31711438faff5b36cc15ea1a3')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "status": 4,
        "author_email": "N/A",
        "author": "VS Code",
        "deployer": "ZipDeploy",
        "message": "Created via a push deployment",
        "start_time": "2022-07-29T06:07:15.0144383Z",
        "end_time": "2022-07-29T06:07:18.0819574Z",
        "active": true
      }
    },
    {
      "type": "Microsoft.Web/sites/deployments",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/51e185f3588f49398ee88e71e0e9189b')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "status": 4,
        "author_email": "N/A",
        "author": "VS Code",
        "deployer": "ZipDeploy",
        "message": "Created via a push deployment",
        "start_time": "2022-07-29T06:06:24.8819751Z",
        "end_time": "2022-07-29T06:06:28.5417954Z",
        "active": false
      }
    },
    {
      "type": "Microsoft.Web/sites/deployments",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/d5c83f2a68204001bdb099932c503a9a')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "status": 4,
        "author_email": "N/A",
        "author": "VS Code",
        "deployer": "ZipDeploy",
        "message": "Created via a push deployment",
        "start_time": "2022-07-29T05:42:18.1083286Z",
        "end_time": "2022-07-29T05:42:24.2052803Z",
        "active": false
      }
    },
    {
      "type": "Microsoft.Web/sites/deployments",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/ee6b4b23af5d4285890a3dd1ba5d7932')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "status": 4,
        "author_email": "N/A",
        "author": "VS Code",
        "deployer": "ZipDeploy",
        "message": "Created via a push deployment",
        "start_time": "2022-07-29T05:47:31.743929Z",
        "end_time": "2022-07-29T05:47:35.4405074Z",
        "active": false
      }
    },
    {
      "type": "Microsoft.Web/sites/hostNameBindings",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/', parameters('sites_necsus_api_name'), '.azurewebsites.net')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ],
      "properties": {
        "siteName": "necsus-api",
        "hostNameType": "Verified"
      }
    },
    {
      "type": "Microsoft.Web/sites/hostNameBindings",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_web_name'), '/', parameters('sites_necsus_web_name'), '.azurewebsites.net')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_web_name'))]"
      ],
      "properties": {
        "siteName": "necsus-web",
        "hostNameType": "Verified"
      }
    },
    {
      "type": "Microsoft.Web/sites/siteextensions",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/Microsoft.AspNetCore.AzureAppServices.SiteExtension')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-20T02_04_44_3843264')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-20T05_04_44_8634656')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-20T08_04_45_4198350')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-20T11_04_45_8669145')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-20T23_04_47_8270240')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-21T02_04_49_3681283')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-21T05_04_48_8399408')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-21T08_04_49_2891439')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-21T11_04_49_8530381')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-21T23_04_51_6655722')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-22T02_04_52_2091455')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-22T05_04_52_6417126')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-22T08_04_53_1632908')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-22T11_04_53_6009755')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-22T23_04_55_5024206')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-23T02_04_56_0160785')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-23T05_04_56_5209483')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-23T08_04_57_0276211')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-23T11_04_57_7083421')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-23T23_04_59_4374978')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-24T02_04_59_9350847')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-24T05_05_00_4866434')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-24T08_05_00_9334141')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-24T11_05_01_4313859')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-24T23_05_03_4594010')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T00_05_03_5721383')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T01_05_03_7349370')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T02_05_03_8773252')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T03_05_04_0337154')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T04_05_04_2227855')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T05_05_04_3839479')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T06_05_04_5535583')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T07_05_04_7653883')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T08_05_04_8758956')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T09_05_05_9944529')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T10_05_05_1909748')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T11_05_05_3288506')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T12_05_05_4855717')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T13_05_05_6489038')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T14_05_05_8294028')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T15_05_05_9921452')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T16_05_06_1097138')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T17_05_06_3068283')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T18_05_06_4568946')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T19_05_06_6282569')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T20_05_06_7550924')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T21_05_06_9195746')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T22_05_07_0911820')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-25T23_05_07_2485869')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T00_05_07_4292874')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T01_05_07_6177309')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T02_05_07_7050826')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T03_05_07_8746538')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T04_05_08_0328464')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T05_05_08_2090156')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T06_05_08_3747850')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T07_05_08_5367351')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T08_05_08_6934402')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T09_05_08_8556308')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T10_05_09_0169799')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T11_05_09_2302726')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T12_05_09_3657078')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T13_05_09_5831017')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T14_05_09_7135991')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T15_05_10_8375227')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T16_05_10_8775385')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T17_05_11_0300383')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T18_05_11_6749993')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T19_05_11_4089689')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T20_05_11_4529847')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T21_05_11_6650871')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T22_05_11_7902876')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-26T23_05_11_9602645')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T00_05_12_1566757')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T01_05_12_2692046')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T02_05_12_5632856')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T03_05_12_6032076')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T04_05_12_7575409')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T05_05_12_9294780')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T06_05_13_1104762')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T07_05_13_2579553')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T08_05_13_4141367')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T09_05_13_5736998')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T10_05_13_7099631')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T11_05_13_8855084')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T12_05_15_1349516')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T13_05_14_2539751')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T14_05_14_4445153')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T15_05_14_6126253')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T16_05_20_7368408')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T17_05_14_9243067')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T18_05_15_1297821')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T19_05_18_2536932')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T20_05_15_4257459')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T21_05_15_5331869')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T22_05_15_6976644')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-27T23_05_15_8480391')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T00_05_16_0795511')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T01_05_16_2075918')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T02_05_16_3962801')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T03_05_16_6166997')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T04_05_16_7400944')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T05_05_16_8735354')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T06_05_17_0798527')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T07_05_17_2829354')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T08_05_17_3818667')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T09_05_17_5313284')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T10_05_17_7405909')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T11_05_17_8852990')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T12_05_18_0223394')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T13_05_18_2399706')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T14_05_18_3565117')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T15_05_18_5057432')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T16_05_18_6856127')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T17_05_18_8331137')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T18_05_18_9744500')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T19_05_19_1656768')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T20_05_19_2856935')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T21_05_19_4582301')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T22_05_19_6059098')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-28T23_05_19_8176072')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T00_05_19_9484452')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T01_05_20_1278667')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T02_05_20_2693292')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T03_05_20_4631365')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T04_05_20_6096694')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T05_05_20_7961355')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T06_05_20_9186182')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T07_05_21_1348273')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Web/sites/snapshots",
      "apiVersion": "2015-08-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/2022-07-29T08_05_21_2659885')]",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]"
      ]
    },
    {
      "type": "Microsoft.Network/privateDnsZones/virtualNetworkLinks",
      "apiVersion": "2018-09-01",
      "name": "[concat(parameters('privateDnsZones_privatelink_database_windows_net_name'), '/k3po6ro6lukw6')]",
      "location": "global",
      "dependsOn": [
        "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_privatelink_database_windows_net_name'))]",
        "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_necsus_vnet_name'))]"
      ],
      "properties": {
        "registrationEnabled": false,
        "virtualNetwork": {
          "id": "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_necsus_vnet_name'))]"
        }
      }
    },
    {
      "type": "Microsoft.Network/privateEndpoints",
      "apiVersion": "2020-11-01",
      "name": "[parameters('privateEndpoints_necsus_private_endpoint_name')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]",
        "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'PrivateLinkSubnet')]"
      ],
      "properties": {
        "privateLinkServiceConnections": [
          {
            "name": "[parameters('privateEndpoints_necsus_private_endpoint_name')]",
            "properties": {
              "privateLinkServiceId": "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]",
              "groupIds": [
                "sqlServer"
              ],
              "privateLinkServiceConnectionState": {
                "status": "Approved",
                "description": "Auto-approved",
                "actionsRequired": "None"
              }
            }
          }
        ],
        "manualPrivateLinkServiceConnections": [],
        "subnet": {
          "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'PrivateLinkSubnet')]"
        },
        "customDnsConfigs": []
      }
    },
    {
      "type": "Microsoft.Network/privateEndpoints/privateDnsZoneGroups",
      "apiVersion": "2020-11-01",
      "name": "[concat(parameters('privateEndpoints_necsus_private_endpoint_name'), '/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/privateEndpoints', parameters('privateEndpoints_necsus_private_endpoint_name'))]",
        "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_privatelink_database_windows_net_name'))]"
      ],
      "properties": {
        "privateDnsZoneConfigs": [
          {
            "name": "privatelink-database-windows-net",
            "properties": {
              "privateDnsZoneId": "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_privatelink_database_windows_net_name'))]"
            }
          }
        ]
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/advancedThreatProtectionSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/CreateIndex')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/DbParameterization')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/DefragmentIndex')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/DropIndex')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/advisors",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/ForceLastGoodPlan')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "autoExecuteValue": "Enabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/auditingPolicies",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Default')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "auditingState": "Disabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/auditingSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "retentionDays": 0,
        "isAzureMonitorTargetEnabled": false,
        "state": "Disabled",
        "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/backupLongTermRetentionPolicies",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "weeklyRetention": "PT0S",
        "monthlyRetention": "PT0S",
        "yearlyRetention": "PT0S",
        "weekOfYear": 0
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/backupShortTermRetentionPolicies",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "retentionDays": 7,
        "diffBackupIntervalInHours": 24
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/extendedAuditingSettings",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "retentionDays": 0,
        "isAzureMonitorTargetEnabled": false,
        "state": "Disabled",
        "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/geoBackupPolicies",
      "apiVersion": "2014-04-01",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Default')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Enabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/ledgerDigestUploads",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Current')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {}
    },
    {
      "type": "Microsoft.Sql/servers/databases/securityAlertPolicies",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Disabled",
        "disabledAlerts": [
          ""
        ],
        "emailAddresses": [
          ""
        ],
        "emailAccountAdmins": false,
        "retentionDays": 0
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/transparentDataEncryption",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Current')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "state": "Enabled"
      }
    },
    {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-sqldb/Default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers/databases', parameters('servers_necsus_sqlserver_name'), 'necsus-sqldb')]",
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]"
      ],
      "properties": {
        "recurringScans": {
          "isEnabled": false,
          "emailSubscriptionAdmins": true
        }
      }
    },
    {
      "type": "Microsoft.Sql/servers/privateEndpointConnections",
      "apiVersion": "2021-11-01-preview",
      "name": "[concat(parameters('servers_necsus_sqlserver_name'), '/necsus-private-endpoint-7b5d1353-bcbb-4b73-b069-45bc7afcd064')]",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('servers_necsus_sqlserver_name'))]",
        "[resourceId('Microsoft.Network/privateEndpoints', parameters('privateEndpoints_necsus_private_endpoint_name'))]"
      ],
      "properties": {
        "privateEndpoint": {
          "id": "[resourceId('Microsoft.Network/privateEndpoints', parameters('privateEndpoints_necsus_private_endpoint_name'))]"
        },
        "privateLinkServiceConnectionState": {
          "status": "Approved",
          "description": "Auto-approved"
        }
      }
    },
    {
      "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
      "apiVersion": "2021-09-01",
      "name": "[concat(parameters('storageAccounts_necsusblobint_name'), '/default/challengebanners')]",
      "dependsOn": [
        "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_necsusblobint_name'), 'default')]",
        "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_necsusblobint_name'))]"
      ],
      "properties": {
        "immutableStorageWithVersioning": {
          "enabled": false
        },
        "defaultEncryptionScope": "$account-encryption-key",
        "denyEncryptionScopeOverride": false,
        "publicAccess": "None"
      }
    },
    {
      "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
      "apiVersion": "2021-09-01",
      "name": "[concat(parameters('storageAccounts_necsusblobint_name'), '/default/photos')]",
      "dependsOn": [
        "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_necsusblobint_name'), 'default')]",
        "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_necsusblobint_name'))]"
      ],
      "properties": {
        "immutableStorageWithVersioning": {
          "enabled": false
        },
        "defaultEncryptionScope": "$account-encryption-key",
        "denyEncryptionScopeOverride": false,
        "publicAccess": "None"
      }
    },
    {
      "type": "Microsoft.Web/sites",
      "apiVersion": "2022-03-01",
      "name": "[parameters('sites_necsus_api_name')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/serverfarms', parameters('serverfarms_necsus_api_asp_name'))]",
        "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'AppSvcSubnet')]"
      ],
      "kind": "app",
      "identity": {
        "type": "SystemAssigned"
      },
      "properties": {
        "enabled": true,
        "hostNameSslStates": [
          {
            "name": "[concat(parameters('sites_necsus_api_name'), '.azurewebsites.net')]",
            "sslState": "Disabled",
            "hostType": "Standard"
          },
          {
            "name": "[concat(parameters('sites_necsus_api_name'), '.scm.azurewebsites.net')]",
            "sslState": "Disabled",
            "hostType": "Repository"
          }
        ],
        "serverFarmId": "[resourceId('Microsoft.Web/serverfarms', parameters('serverfarms_necsus_api_asp_name'))]",
        "reserved": false,
        "isXenon": false,
        "hyperV": false,
        "vnetRouteAllEnabled": true,
        "siteConfig": {
          "numberOfWorkers": 1,
          "acrUseManagedIdentityCreds": false,
          "alwaysOn": false,
          "http20Enabled": false,
          "functionAppScaleLimit": 0,
          "minimumElasticInstanceCount": 0
        },
        "scmSiteAlsoStopped": false,
        "clientAffinityEnabled": true,
        "clientCertEnabled": false,
        "clientCertMode": "Required",
        "hostNamesDisabled": false,
        "customDomainVerificationId": "F80E45E9C481A25CC85D4144860C091E8C84D11474A31680603AA30ACC89BFA0",
        "containerSize": 0,
        "dailyMemoryTimeQuota": 0,
        "httpsOnly": true,
        "redundancyMode": "None",
        "storageAccountRequired": false,
        "virtualNetworkSubnetId": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'AppSvcSubnet')]",
        "keyVaultReferenceIdentity": "SystemAssigned"
      }
    },
    {
      "type": "Microsoft.Web/sites/virtualNetworkConnections",
      "apiVersion": "2022-03-01",
      "name": "[concat(parameters('sites_necsus_api_name'), '/606b9b94-8889-44f0-a104-9a06e06f1baf_AppSvcSubnet')]",
      "location": "East US",
      "dependsOn": [
        "[resourceId('Microsoft.Web/sites', parameters('sites_necsus_api_name'))]",
        "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'AppSvcSubnet')]"
      ],
      "properties": {
        "vnetResourceId": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_necsus_vnet_name'), 'AppSvcSubnet')]",
        "isSwift": true
      }
    }
  ]
}